<!DOCTYPE html>
<html>
  <head>
    <title>Rock-Paper-Scissor</title>
      <style> 
       
      </style>
  </head>
  <body>
    <p> Rock  OR  Paper  OR Scissors</p>

    <button onclick="
    playGame(`Rock`);
    ">Rock</button>


    <button onclick="
    playGame(`Paper`);
    "> Paper </button>



    <button onclick="
    playGame(`Scissors`);
    ">Scissors</button>

    <p class = "js-result"></p>
    <p class = "js-moves"></p>

    <p class ="js-score"></p>

    <! -- using objects -->
    <button onClick="
    score.wins = 0;
    score.losses = 0; 
    score.ties = 0;
    localStorage.removeItem('score');
    updateScoreElement();
    ">Reset Score</button>


    <p> Click her to see the final version of the project</p>
   
    <script>

      //to convert back string to object
      let score = JSON.parse(localStorage.getItem('score')) //  || {      (or use default operator like this)
      // wins : 0,
      // losses : 0,
      // ties : 0
      // };        

      if (score === null){  //or use if(!score)
        score ={
          wins : 0,
          losses : 0,
          ties : 0
        };
      }

      updateScoreElement();
 

      // const score ={
      //   wins:0,
      //   losses:0,
      //   ties:0
      // };


      



      //getItem - to get the value out the local storage
      //console
      console.log(JSON.parse(localStorage.getItem('score'))); //null = if u use backticks
      console.log(updateScoreElement());

      // to try inside script but outside codeblock
      //let computerMove = '';


      // algorithm
      // 1. Computer randomly selects a move
      // 2. Compare the moves to get the result
      // 3. Update the score
      // 4. Display the result and score in a popup


    function playGame (playerMove) {
      const computerMove = pickComputerMove(); 

        let result = '';

        if(playerMove === `Paper`){

        if(computerMove === 'Paper') {
          result = 'Tie';
        }else if(computerMove === 'Scissors'){
          result = 'You lose';
        }else{
          result = 'You win';
        }

        }else if (playerMove === `Scissors`){
          if(computerMove === 'Scissors') {
            result = 'Tie';
          }else if(computerMove === 'Rock'){
            result = 'You lose';
          }else{
            result = 'You win';
          }

        }else{
          if(computerMove === 'rock') {
            result = 'Tie';
          }else if(computerMove === 'Paper'){
            result = 'You win';
          }else{
            result = 'You lose';
          }
        }

        if(result === `You win`){
          score.wins++;
        }else if(result === `You lose`){
          score.losses++;
        }else{
          score.ties++;
        }

        //using local storage
        //It supports only strings
        localStorage.setItem(`score`, JSON.stringify(score));

        updateScoreElement();

        document.querySelector('.js-result').innerHTML = result;

        document.querySelector('.js-moves').innerHTML = `You picked ${playerMove} - Computer picked ${computerMove}`;



        alert(`You picked ${playerMove}. Computer picked ${computerMove}. ${result}
Wins: ${score.wins}
Losses: ${score.losses}
Ties: ${score.ties}`);
    }  

    function updateScoreElement(){
      document.querySelector('.js-score')
          .innerHTML = `Wins: ${score.wins} 
            Losses: ${score.losses} 
            Ties: ${score.ties}` ;            
    } 

    function pickComputerMove() {
      const randomNumber = Math.random();

      let computerMove = '';


      if(randomNumber >= 0 && randomNumber < 1/3 ){
        computerMove = 'Rock';
      }else if(randomNumber >= 1/3 && randomNumber < 2/3){
        computerMove = 'Paper';
      }else{
        computerMove = 'Scissors';
      }

      // Return Statement - lets us get a value out of the function

      //return `rock`; // reurns rock in the console
      //  return = returns undefined



      // if u want to keep - let computerMove = ''; inside a function itself 
      // then u have to return the value of computerMove
      console.log(computerMove);
      return computerMove;
    }


   
    </script>
  </body>
</html>